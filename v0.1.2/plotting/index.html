<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Plotting · GerryChain</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">GerryChain</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../getting_started/">Getting started with a chain</a></li><li><a class="tocitem" href="../graph/">BaseGraph</a></li><li><a class="tocitem" href="../partition/">Partition</a></li><li><a class="tocitem" href="../constraints/">Constraints</a></li><li><a class="tocitem" href="../accept/">Acceptance Functions</a></li><li><span class="tocitem">Scores</span><ul><li><a class="tocitem" href="../scores/">Score Types</a></li><li><a class="tocitem" href="../chain_score_data/">ChainScoreData</a></li><li class="is-active"><a class="tocitem" href>Plotting</a><ul class="internal"><li><a class="tocitem" href="#score_boxplot()"><span>score_boxplot()</span></a></li><li><a class="tocitem" href="#score_histogram()"><span>score_histogram()</span></a></li></ul></li><li><a class="tocitem" href="../saving_results/">Saving Results</a></li></ul></li><li><a class="tocitem" href="../election/">Election</a></li><li><a class="tocitem" href="../chains/">Markov Chains</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Scores</a></li><li class="is-active"><a href>Plotting</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Plotting</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/mggg/GerryChainJulia/blob/master/docs/src/plotting.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Data-visualization"><a class="docs-heading-anchor" href="#Data-visualization">Data visualization</a><a id="Data-visualization-1"></a><a class="docs-heading-anchor-permalink" href="#Data-visualization" title="Permalink"></a></h1><p>After running a chain, it&#39;s common to want to create some data visualizations that summarize various statistics of interest across plans in the chain (e.g., a compactness score, party vote share by district, etc.). As part of the GerryChainJulia library, we use <a href="https://github.com/JuliaPy/PyPlot.jl">PyPlot.jl</a> to create some functions that will generate some common types of graphs.</p><ul><li><a href="#GerryChain.score_boxplot"><code>GerryChain.score_boxplot</code></a></li><li><a href="#GerryChain.score_histogram"><code>GerryChain.score_histogram</code></a></li></ul><h2 id="score_boxplot()"><a class="docs-heading-anchor" href="#score_boxplot()">score_boxplot()</a><a id="score_boxplot()-1"></a><a class="docs-heading-anchor-permalink" href="#score_boxplot()" title="Permalink"></a></h2><p>Boxplots can be helpful for visualizing the &quot;typical&quot; range of values for a statistic of interest for all the plans in the chain. For example, users interested to know whether &quot;cracking and packing&quot; has occurred might compare the percentage of minority voters in each district in an enacted plan overlaid on a set of boxplots representing the typical range of percentage of minority voters for plans generated by the chain. Users can generate boxplots for any score of interest. If the score is a district-wide score (e.g., percentage of white voters in each district), then there will be multiple boxplots shown in the same figure, with each boxplot representing the range of scores for a particular district. If the score is a plan-wide score, then there will be one boxplot in the figure.</p><article class="docstring"><header><a class="docstring-binding" id="GerryChain.score_boxplot" href="#GerryChain.score_boxplot"><code>GerryChain.score_boxplot</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">score_boxplot(score_values::Array{S, 2};
              sort_by_score::Bool=true,
              label::String=&quot;GerryChain&quot;,
              comparison_scores::Array=[],
              ax::Union{Nothing, PyPlot.PyObject}=nothing) where {S&lt;:Number}</code></pre><p>Produces a graph with multiple matplotlib box plots for the values of scores throughout the chain. Intended for use with district-level scores (DistrictAggregate, DistrictScore).</p><p><em>Arguments:</em></p><ul><li>score_values        : A 2-dimensional array of score values with                       dimension (n x d), where n is the number of                       states in the chain and d is the number of                       districts</li><li>sort<em>by</em>score       : Whether we should order districts by median                       of score value.</li><li>label               : Legend key for the GerryChain boxplots. Only shown                       if there are scores from other plans passed in                       as reference points.</li><li>comparison_scores   : A list of Tuples that is passed in if the user                       would like to compare the per-district scores                       of a particular plan with the GerryChain results                       on the same graph. The list of tuples should                       have the structure [(l₁, scores₁), ... , (lᵤ, scoresᵤ)],                       where lᵢ is a label that will appear on the                       legend and scoresᵢ is an array of length d,                       where d is the number of districts. Each                       element of the tuple should be of type                       Tuple{String, Array{S, 1}}. Example:                         [                           (name₁, [v₁, v₂, ... , vᵤ]),                           ...                           (nameₓ, [w₁, w₂, ... , wᵤ])                         ], where there are x comparison plans and u                       districts.</li><li>ax                  : A PyPlot (matplotlib) Axis object</li></ul><p><em>Returns</em> a MatPlotLib Axis object with the boxplot.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mggg/GerryChainJulia/blob/c5ff48718d94c4c9f40d0f3a86adc4d143715502/src/plot.jl#L1-L41">source</a></section><section><div><pre><code class="language-none">score_boxplot(score_values::Array{S, 1};
              label::String=&quot;GerryChain&quot;,
              comparison_scores::Array=[],
              ax::Union{Nothing, PyPlot.PyObject}=nothing) where {S&lt;:Number}</code></pre><p>Produces a single matplotlib box plot for the values of scores throughout the chain. Intended for use with plan-level scores.</p><p><em>Arguments:</em></p><ul><li>score_values        : A 1-dimensional array of score values of                       length n, where n is the number of states in                       the chain.</li><li>label               : Legend key for the GerryChain boxplots. Only shown                       if there are scores from other plans passed in                       as reference points.</li><li>comparison_scores   : A list of Tuples that is passed in if the user                       would like to compare the score of a particular                       plan with the GerryChain boxplot on the same graph.                       The list of tuples should have the structure                       [(l₁, score₁), ... , (lᵤ, scoreᵤ)], where lᵢ                       is a label that will appear on the legend and                       scoreᵢ is the value of the plan-wide score                       for the comparison plan.</li><li>ax                  : A PyPlot (matplotlib) Axis object</li></ul><p><em>Returns</em> a MatPlotLib Axis object with the boxplot.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mggg/GerryChainJulia/blob/c5ff48718d94c4c9f40d0f3a86adc4d143715502/src/plot.jl#L79-L106">source</a></section><section><div><pre><code class="language-none">score_boxplot(chain_data::ChainScoreData,
              score_name::String; kwargs...)</code></pre><p>Creates a graph with boxplot(s) of the values of scores throughout the chain.</p><p><em>Arguments:</em></p><ul><li>chain_data  : ChainScoreData object that contains the values of scores at               every step of the chain</li><li>score_name  : name of the score (i.e., the <code>name</code> field of an AbstractScore)</li><li>kwargs      : Optional arguments, including label, comparison_scores, and               sort_by_score (the latter should only be passed for               district-level scores).</li></ul><p><em>Returns</em> a MatPlotLib Axis object with the boxplot.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mggg/GerryChainJulia/blob/c5ff48718d94c4c9f40d0f3a86adc4d143715502/src/plot.jl#L133-L149">source</a></section></article><p><strong>Usage</strong></p><pre><code class="language-none"># run chain
chain_data = recom_chain(...)

# graph results and compare to enacted plan!
# the length of `plan1_dshare` and `plan2_dshare` should be equal to the total # of districts
plan1_dshare = [...]
plan2_dshare = [...]
score_boxplot(chain_data, &quot;dem_vote_share&quot;, comparison_scores=[(&quot;plan1&quot;, plan1_dshare), (&quot;plan2&quot;, plan2_dshare)])
# without comparison scores:
# score_boxplot(chain_data, &quot;dem_vote_share&quot;)

# if you want to edit anything about the default plot, you can simply use plt
plt.ylabel(&quot;Democratic vote share&quot;)</code></pre><p><strong>Example of generated plot</strong></p><p><img src="https://user-images.githubusercontent.com/5581093/87839451-b56ccf00-c84f-11ea-92c1-83581efa29fa.png" alt="boxplot"/></p><h2 id="score_histogram()"><a class="docs-heading-anchor" href="#score_histogram()">score_histogram()</a><a id="score_histogram()-1"></a><a class="docs-heading-anchor-permalink" href="#score_histogram()" title="Permalink"></a></h2><p>This function allows users to easily create histogram graphs of a (plan-level) score of interest (e.g., the number of cut edges, the number of seats won by a particular party, etc.) (Unlike the <code>score_boxplot</code> function, this function cannot be used on district-level scores.) Similar to <code>score_boxplot</code>, you can also pass in &quot;comparison scores&quot; to visualize where a particular value of a score lies in relation to the histogram of values observed during the process of the chain.</p><article class="docstring"><header><a class="docstring-binding" id="GerryChain.score_histogram" href="#GerryChain.score_histogram"><code>GerryChain.score_histogram</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">score_histogram(score_values::Array{S, 1};
                comparison_scores::Array=[],
                bins::Union{Nothing, Int, Vector}=nothing,
                range::Union{Nothing, Tuple}=nothing,
                density::Bool=false,
                rwidth::Union{Nothing, T}=nothing,
                ax::Union{Nothing, PyPlot.PyObject}=nothing) where {S&lt;:Number, T&lt;:Number}</code></pre><p>Creates a graph with histogram of the values of a score throughout the chain. Only applicable for scores of type PlanScore.</p><p><em>Arguments:</em></p><ul><li>score_values        : A 1-dimensional array of score values of length n,                       where n is the number of states in the chain.</li><li>comparison_scores   : A list of Tuples that is passed in if the user                       would like to compare core of a particular                       plan with the GerryChain histogram on the same                       figure. The list of tuples should have the                       structure [(l₁, score₁), ... , (lᵤ, scoreᵤ)],                       where lᵢ is a label that will appear on the                       legend and scoreᵢ is the value of the plan-wide                       score for the comparison plan.</li><li>ax                  : A PyPlot (matplotlib) Axis object</li></ul><p><em>Returns</em> a MatPlotLib Axis object with the histogram.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mggg/GerryChainJulia/blob/c5ff48718d94c4c9f40d0f3a86adc4d143715502/src/plot.jl#L163-L189">source</a></section><section><div><pre><code class="language-none">score_histogram(chain_data::ChainScoreData,
                score_name::String; kwargs...)</code></pre><p>Creates a graph with histogram of the values of a score throughout the chain. Only applicable for scores of type PlanScore.</p><p><em>Arguments:</em></p><ul><li>chain_data  : ChainScoreData object that contains the values of scores at               every step of the chain</li><li>score_name  : name of the score (i.e., the <code>name</code> field of an AbstractScore)</li><li>kwargs      : Optional arguments, including comparison_scores and other               matplotlib arguments.</li></ul><p><em>Returns</em> a MatPlotLib Axis object with the histogram.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mggg/GerryChainJulia/blob/c5ff48718d94c4c9f40d0f3a86adc4d143715502/src/plot.jl#L217-L232">source</a></section></article><p><strong>Usage</strong></p><pre><code class="language-none"># run chain
chain_data = recom_chain(...)

# graph results and compare to enacted plan!
score_histogram(chain_data, &quot;cut_edges&quot;, comparison_scores=[ (&quot;enacted&quot;, 21) ]) # if the enacted plan has 21 cut edges
# score_histogram(chain_data, &quot;cut_edges&quot;, comparison_scores=[ (&quot;enacted&quot;, 21) ], bins=3, rwidth=1) # we also support passing in a few arguments that can be passed into matplotlib
# score_histogram(chain_data, &quot;cut_edges&quot;) # without any comparison scores

# if user wants to edit anything about the default plot, they can simply use plt
plt.xlabel(&quot;efficiency_gap&quot;)</code></pre><p><strong>Example of generated histogram</strong></p><p><img src="https://user-images.githubusercontent.com/5581093/87839677-cc5ff100-c850-11ea-84a0-af06fb215a38.png" alt="boxplot"/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../chain_score_data/">« ChainScoreData</a><a class="docs-footer-nextpage" href="../saving_results/">Saving Results »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 21 October 2020 00:16">Wednesday 21 October 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
