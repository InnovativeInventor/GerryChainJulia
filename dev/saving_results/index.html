<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Saving Results · GerryChain</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">GerryChain</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Home</a></li><li><a class="tocitem" href="../installation/">Installation</a></li><li><a class="tocitem" href="../getting_started/">Getting started with a chain</a></li><li><a class="tocitem" href="../graph/">BaseGraph</a></li><li><a class="tocitem" href="../partition/">Partition</a></li><li><a class="tocitem" href="../constraints/">Constraints</a></li><li><a class="tocitem" href="../accept/">Acceptance Functions</a></li><li><span class="tocitem">Scores</span><ul><li><a class="tocitem" href="../scores/">Score Types</a></li><li><a class="tocitem" href="../chain_score_data/">ChainScoreData</a></li><li><a class="tocitem" href="../plotting/">Plotting</a></li><li class="is-active"><a class="tocitem" href>Saving Results</a><ul class="internal"><li><a class="tocitem" href="#Serialization"><span>Serialization</span></a></li><li><a class="tocitem" href="#Saving-scores-to-CSV"><span>Saving scores to CSV</span></a></li><li><a class="tocitem" href="#Saving-scores-to-JSON"><span>Saving scores to JSON</span></a></li></ul></li></ul></li><li><a class="tocitem" href="../election/">Election</a></li><li><a class="tocitem" href="../chains/">Markov Chains</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Scores</a></li><li class="is-active"><a href>Saving Results</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Saving Results</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/mggg/GerryChainJulia/blob/master/docs/src/saving_results.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Saving-results"><a class="docs-heading-anchor" href="#Saving-results">Saving results</a><a id="Saving-results-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-results" title="Permalink"></a></h1><p>Let&#39;s say that you&#39;ve run a chain and want to save the resulting <code>ChainScoreData</code> object to your hard drive, so that you can do analysis of the results at a later time without having to re-run the chain. Below are some options you could pursue to do that.</p><ul><li><a href="#GerryChain.save_scores_to_csv"><code>GerryChain.save_scores_to_csv</code></a></li><li><a href="#GerryChain.save_scores_to_json"><code>GerryChain.save_scores_to_json</code></a></li></ul><h2 id="Serialization"><a class="docs-heading-anchor" href="#Serialization">Serialization</a><a id="Serialization-1"></a><a class="docs-heading-anchor-permalink" href="#Serialization" title="Permalink"></a></h2><p>One super simple way to save the results is to use Julia&#39;s built-in <code>Serialization</code> library to save the <code>ChainScoreData</code> object. Here&#39;s an example:</p><pre><code class="language-none">chain_data = recom_chain(...)
serialize(&quot;example.jld&quot;, chain_data)</code></pre><p>Then, in order to read back the saved data in another file, just run</p><pre><code class="language-none">chain_data = deserialize(&quot;example.jld&quot;)</code></pre><p>Note that the <code>.jld</code> format is specific to Julia, so you won&#39;t be able to <code>deserialize</code> in a script written in another language, like Python or R.</p><h2 id="Saving-scores-to-CSV"><a class="docs-heading-anchor" href="#Saving-scores-to-CSV">Saving scores to CSV</a><a id="Saving-scores-to-CSV-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-scores-to-CSV" title="Permalink"></a></h2><p>CSV is a common format used to store data. We&#39;ve written a function called <code>save_scores_to_csv()</code> into GerryChain that makes it super simple to export scores to a CSV format, which can then be read by programs in any language of your choosing. Each row of the CSV will correspond to one state in the chain, while each score corresponds to one or more columns. (District level scores will produce one column for each district. For example: a district-level score called <code>bvap</code> evaluated on plans with 10 districts will generate 10 columns: <code>bvap_1</code>, <code>bvap_2</code>, ...<code>bvap_10</code>.) The order of the rows corresponds to the order of the states visited by the chain. Here&#39;s what the function looks like:</p><article class="docstring"><header><a class="docstring-binding" id="GerryChain.save_scores_to_csv" href="#GerryChain.save_scores_to_csv"><code>GerryChain.save_scores_to_csv</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">save_scores_to_csv(filename::String,
                   chain_data::ChainScoreData,
                   score_names::Array{String,1}=String[])</code></pre><p>Save the <code>scores</code> in a CSV file named <code>filename</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mggg/GerryChainJulia/blob/059d2f24ec4085f8caac4dab0cf74d947b2961c7/src/scores.jl#L612-L618">source</a></section></article><p><strong>Usage</strong></p><pre><code class="language-none"># let&#39;s say there are 3 districts and 2 steps in the chain
chain_data = recom_chain(...)
save_scores_to_csv(&quot;data.csv&quot;, chain_data, score_names = [&quot;cut_edges&quot;, &quot;vote_count_d&quot;, &quot;vote_share_d&quot;]) # 1 plan score, 2 district-level scores</code></pre><p><strong>Resulting CSV</strong></p><pre><code class="language-none">cut_edges,vote_count_d_1,vote_count_d_2,vote_count_d_3,vote_share_d_1,vote_share_d_2,vote_share_d_3
5,2,4,4,0.2,0.4,0.4
6,3,5,2,0.3,0.5,0.2</code></pre><h2 id="Saving-scores-to-JSON"><a class="docs-heading-anchor" href="#Saving-scores-to-JSON">Saving scores to JSON</a><a id="Saving-scores-to-JSON-1"></a><a class="docs-heading-anchor-permalink" href="#Saving-scores-to-JSON" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="GerryChain.save_scores_to_json" href="#GerryChain.save_scores_to_json"><code>GerryChain.save_scores_to_json</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">save_scores_to_json(filename::String,
                    chain_data::ChainScoreData,
                    score_names::Array{String,1}=String[])</code></pre><p>Save the <code>scores</code> in a JSON file named <code>filename</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/mggg/GerryChainJulia/blob/059d2f24ec4085f8caac4dab0cf74d947b2961c7/src/scores.jl#L676-L682">source</a></section></article><p><strong>Usage</strong></p><pre><code class="language-none">chain_data = recom_chain(graph, partition, pop_constraint, 10, scores)
save_scores_to_json(&quot;test.json&quot;, chain_data) # by default will save all scores in the chain
# alternatively, save_scores_to_json(&quot;test.json&quot;, chain_data, [&quot;names&quot;, &quot;of&quot;, &quot;desired&quot;, &quot;scores&quot;])</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../plotting/">« Plotting</a><a class="docs-footer-nextpage" href="../election/">Election »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Tuesday 20 October 2020 07:08">Tuesday 20 October 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
